!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.HtmlDurationPicker=e():t.HtmlDurationPicker=e()}(this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e),
/**
 * @preserve
 * html-duration-picker.js
 *
 * @description Turn an html input box to a duration picker, without jQuery
 * @version 2.2.22
 * @author Chif <nadchif@gmail.com>
 * @license Apache-2.0
 *
 */e.default=function(){const t=({target:{selectionStart:t,value:e}},r,n)=>{const a=e.indexOf(":"),o=e.lastIndexOf(":");let i;return n&&r?"minutes":(!n&&t<=a?i="hours":!r&&t<=o?i="minutes":!r&&t>o?i="seconds":console.warn("Unhandled case in getCursorSelection."),{cursorSelection:i,hideSeconds:r,hourMarker:n?null:a,minuteMarker:o})},e=e=>{console.log("selectFocus");const a=n(e.target),o=r(e.target),{cursorSelection:i,hourMarker:s,minuteMarker:d}=t(e,o,a);if(i){if("hours"===i)return e.target.setAttribute("data-adjustment-mode",3600),void e.target.setSelectionRange(0,s);if("minutes"===i){const t=o?3:0;return e.target.setAttribute("data-adjustment-mode",60),void e.target.setSelectionRange(null===s?0:s+1,d+t)}if("seconds"===i)return e.target.setAttribute("data-adjustment-mode",1),void e.target.setSelectionRange(d+1,d+3);e.target.setAttribute("data-adjustment-mode","ss"),e.target.setSelectionRange(d+1,d+3)}},r=t=>void 0!==t.dataset.hideSeconds&&"false"!==t.dataset.hideSeconds,n=t=>void 0!==t.dataset.hideHours&&"false"!==t.dataset.hideHours,a=(t,e)=>{const r=Math.floor(e/3600),n=e%3600,a=Math.floor(n/60);return o(t,r,a,n%60)},o=(t,e,a,o)=>{const i=n(t),s=r(t);if(s&&i){return String(a).padStart(2,"0")}if(s){return`${String(e).padStart(2,"0")}:${String(a).padStart(2,"0")}`}if(i){return`${String(a).padStart(2,"0")}:${String(o).padStart(2,"0")}`}return`${String(e).padStart(2,"0")}:${String(a).padStart(2,"0")}:${String(o).padStart(2,"0")}`},i=(t,e)=>{t.value=a(t,e),t.dispatchEvent(((t,e={bubbles:!1,cancelable:!1})=>{if("function"==typeof Event)return new Event(t,{bubbles:e.bubbles,cancelable:e.cancelable});{const r=document.createEvent("Event");return r.initEvent(t,e.bubbles,e.cancelable),r}})("input",{bubbles:!0,cancelable:!1}))},s=(t,e)=>{const a=t.value.indexOf(":"),o=t.value.lastIndexOf(":"),i=r(t),s=n(t);t.focus(),t.select(),!s&&e>=3600?(t.selectionStart=0,t.selectionEnd=a):!i&&e<60?(t.selectionStart=o+1,t.selectionEnd=o+3):(t.selectionStart=a+1,t.selectionEnd=a+3,e=60),e>=1&&e<=3600&&t.setAttribute("data-adjustment-mode",e)},d=t=>{let e=1;return Number(t.getAttribute("data-adjustment-mode"))>0&&(e=Number(t.getAttribute("data-adjustment-mode"))),e},l=(t,e)=>{const r=d(t);let n=b(t,t.value);switch(e){case"up":n+=r;break;case"down":n-=r,n<0&&(n=0)}const a=g(t,n);i(t,a)},u=(t,e)=>{console.log("shiftFocus");const r=d(t);switch(e){case"left":s(t,60*r);break;case"right":s(t,r/60)}},c=(t,e,r)=>{const n=p(e,r);return RegExp(n).test(t)},p=(t,e)=>e&&t?"^[0-5][0-9]$":t?"^[0-9]{2,3}:[0-5][0-9]$":e?"^([0-9]{2,3}:)?[0-5][0-9]:[0-5][0-9]$":"^[0-9]{2,3}:[0-5][0-9]:[0-5][0-9]$",g=(t,e)=>{const{maxDuration:r,minDuration:n}=y(t);return Math.min(Math.max(e,n),r)},b=(t,e)=>{const a=n(t),o=r(t),i=e.split(":");return a&&o&&i.length<2?Number(60*i[0]):a&&i.length<3?Number(i[1]||0)+Number(60*i[0]):o&&i.length<3?Number(60*i[1])+Number(60*i[0]*60):Number(i[2]||0)+Number(60*i[1])+Number(60*i[0]*60)},f=o=>{console.log("validateInput");const i=n(o.target),s=r(o.target),{cursorSelection:d}=t(o,s,i),l=o.target.value.split(":");return o.target.dataset.duration&&c(o.target.dataset.duration,s,i)&&(s&&2!==l.length||!s&&3!==l.length)?(console.log("fallback to data-duration value"),o.target.value=a(o.target,b(o.target,o.target.dataset.duration)),void e(o)):s||3===l.length?s&&2!==l.length?(console.log("fallback to default 00:00"),void(o.target.value="00:00")):(isNaN(l[0])&&(l[0]="00"),(isNaN(l[1])||l[1]<0)&&(l[1]="00"),(l[1]>59||l[1].length>2)&&(l[1]="59"),s||2!==l[1].length||l[1].slice(-1)!==o.key||"minutes"!==d||u(o.target,"right"),s||((isNaN(l[2])||l[2]<0)&&(l[2]="00"),(l[2]>59||l[2].length>2)&&(l[2]="59")),o.target.value=l.join(":"),void e(o)):(console.log("fallback to default 00:00:00"),void(o.target.value="00:00:00"))},m=t=>{const e=t.target,r=e.value||e.dataset.duration,n=b(e,r);i(e,g(e,n))},h=t=>{if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight","Enter"].includes(t.key)){switch(t.key){case"ArrowDown":l(t.target,"down");break;case"ArrowUp":l(t.target,"up");break;case"ArrowLeft":u(t.target,"left");break;case"ArrowRight":u(t.target,"right");break;case"Enter":m(t),t.target.blur()}t.preventDefault()}if(isNaN(t.key)&&!["Backspace","ArrowDown","ArrowUp","Tab"].includes(t.key))return t.preventDefault(),!1},v=(t,e,a)=>{const o=t.dataset[e];return c(o,r(t),n(t))?b(t,o):a},y=t=>({minDuration:v(t,"durationMin",0),maxDuration:v(t,"durationMax",1/0)}),x=()=>(document.querySelectorAll("input.html-duration-picker").forEach(t=>{if("true"==t.getAttribute("data-upgraded"))return;const a=t.currentStyle||window.getComputedStyle(t),o=a.marginRight,u=a.marginLeft,p=a.width;t.setAttribute("data-upgraded",!0),t.value&&c(t.value,r(t),n(t))||i(t,(t=>{const e=v(t,"duration",0);return g(t,e)})(t)),t.style.textAlign="right",t.style.paddingRight="20px",t.style.boxSizing="border-box",t.style.width="100%",t.style.margin=0,t.style.cursor="text",t.setAttribute("aria-label","Duration Picker"),t.addEventListener("keydown",h),t.addEventListener("focus",e),t.addEventListener("mouseup",e),t.addEventListener("change",f),t.addEventListener("blur",m),t.addEventListener("keyup",f),t.addEventListener("drop",t=>t.preventDefault());const b=document.createElement("button"),y=document.createElement("button"),x=[b,y];b.setAttribute("type","button"),b.setAttribute("aria-label","Increase duration"),b.setAttribute("style",`text-align:center; width: 16px;padding: 0px 4px; border:none; cursor:default; height:${t.offsetHeight/2-1}px !important; position:absolute; top: 1px;`),b.classList.add("scroll-up"),y.setAttribute("type","button"),y.setAttribute("aria-label","Decrease duration"),y.setAttribute("style",`text-align:center; width: 16px;padding: 0px 4px; border:none; cursor:default; height:${t.offsetHeight/2-1}px !important; position:absolute; top: ${t.offsetHeight/2-1}px;`),y.classList.add("scroll-down");const w=document.createElement("div"),S=document.createElement("div");w.setAttribute("style","width:0;height:0; border-style:solid;border-width:0 4px 5px 4px; border-color:transparent transparent #000 transparent"),S.setAttribute("style","width:0;height:0; border-style:solid;border-width:5px 4px 0 4px; border-color:#000 transparent transparent transparent"),y.appendChild(S),b.appendChild(w),x.forEach(e=>{let r;e.addEventListener("mousedown",n=>{n.target.style.transform="translateY(1px)",n.preventDefault(),e==b?(l(t,"up"),r=setInterval(l,200,t,"up")):(l(t,"down"),r=setInterval(l,200,t,"down"))}),e.addEventListener("keypress",r=>{r.target.style.transform="translateY(1px)","Enter"==r.key&&(r.preventDefault(),l(t,e==b?"up":"down"))}),e.addEventListener("keyup",e=>{if("Enter"==e.key){const e=d(t);s(t,e)}}),e.addEventListener("mouseup",e=>{e.target.style.transform="translateY(0)";const n=d(t);s(t,n),clearInterval(r)}),e.addEventListener("mouseleave",e=>{if(e.target.style.transform="translateY(0)",r){clearInterval(r);const e=d(t);s(t,e)}})});const E=document.createElement("div");E.setAttribute("style",`display:inline-block; position: absolute;top:1px;left: ${parseFloat(p)-20}px; height:${t.offsetHeight}px; padding:2px 0`),E.classList.add("controls"),E.appendChild(b),E.appendChild(y);const k=document.createElement("div");k.setAttribute("style",`display: inline-block; position: relative; background: transparent; padding: 0px; width: ${p}; margin-left: ${u}; margin-right: ${o};`),k.classList.add("html-duration-picker-wrapper"),t.parentNode.insertBefore(k,t),k.appendChild(t),k.appendChild(E)}),!0);return window.addEventListener("DOMContentLoaded",()=>x()),{init:x,refresh:x}}()}]).default}));